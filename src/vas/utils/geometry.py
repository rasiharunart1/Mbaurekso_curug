def clamp(val, lo, hi):
    return max(lo, min(hi, val))